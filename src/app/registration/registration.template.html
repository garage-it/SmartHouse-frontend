<form class="registration" (ngSubmit)="save()" #r="ngForm" novalidate>
    <label>
        Username: <b class="red-text">*</b>
        <input [(ngModel)]="user.name"
               name="name"
               #name="ngModel"
               class="black-text"
               type="text"
               required
        />
    </label>
    <div [hidden]="!name.touched || name.valid" class="red-text text-darken-4">
        Username should be filled
    </div>

    <label>
        Email: <b class="red-text">*</b>
        <input [(ngModel)]="user.email"
               name="email"
               #email="ngModel"
               class="black-text"
               type="email"
               pattern="^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$"
               required
        />
    </label>
    <div *ngIf="email.errors">
        <span *ngIf="email.touched && email.errors.required" class="red-text text-darken-4">Email should be filled</span>
        <span *ngIf="email.errors.pattern" class="red-text text-darken-4">Email has an invalid format</span>
    </div>

    <label>
        Password: <b class="red-text">*</b>
        <input [(ngModel)]="user.password"
               name="password"
               #password="ngModel"
               class="black-text"
               type="password"
               minlength="8"
               required
        />
    </label>
    <div *ngIf="password.errors">
        <span *ngIf="password.touched && password.errors.required" class="red-text text-darken-4">Password should be filled</span>
        <span *ngIf="password.errors.minlength" class="red-text text-darken-4">Password must have at least 8 characters</span>
    </div>

    <label>
        Password confirmation: <b class="red-text">*</b>
        <input [(ngModel)]="user.passwordConfirm"
               name="passwordConfirm"
               #passwordConfirm="ngModel"
               class="black-text"
               type="password"
               required
        />
    </label>
    <div [hidden]="!passwordConfirm.value || passwordsMatch()" class="red-text text-darken-4">
        Passwords do not match
    </div>

    <button class="waves-effect waves-light btn blue-grey darken-1" type="submit"
            [disabled]="!r.form.valid || !passwordsMatch()">REGISTER</button>
</form>
